<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>milk: Working with git</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">milk
   &#160;<span id="projectnumber">1.01</span>
   </div>
   <div id="projectbrief">Modular Image processing Library toolKit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_WorkingWithGit.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Working with git </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#page_WorkingWithGit_SourceCodeAndModules">1. Source Code and Modules</a><ul><li class="level2"><a href="#page_WorkingWithGit_SourceCodeAndModules_Synchronization">1.1. Synchronization: loading updated modules</a></li>
<li class="level2"><a href="#page_WorkingWithGit_SourceCodeAndModules_EditingSubmodule">1.2. Editing submodule source code</a></li>
<li class="level2"><a href="#page_WorkingWithGit_SourceCodeAndModules_UpdatingMaster">1.3. Updating master branches</a></li>
<li class="level2"><a href="#page_WorkingWithGit_SourceCodeAndModules_ReleasingVersion">1.4. Releasing a new version</a></li>
</ul>
</li>
<li class="level1"><a href="#page_WorkingWithGit_SourceCodeDocumentation">2. Source Code Documentation (doxygen)</a></li>
</ul>
</div>
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>This file: ./src/CommandLineInterface/doc/WorkingWithGit.md</dd></dl>
<hr/>
<h1><a class="anchor" id="page_WorkingWithGit_SourceCodeAndModules"></a>
1. Source Code and Modules</h1>
<p>Most of milk's code is in a set of modules. Each module is compiled as a shared object loaded by the main process at runtime.</p>
<p>In Git, each module has its own repository, linked to the package as a git submodule.</p>
<h2><a class="anchor" id="page_WorkingWithGit_SourceCodeAndModules_Synchronization"></a>
1.1. Synchronization: loading updated modules</h2>
<p>To get latest modules (master branches) : </p><pre class="fragment">$ git submodule foreach "(git checkout master; git pull)"
</pre><p>To get latest modules (dev branches) : </p><pre class="fragment">$ git submodule foreach "(git checkout dev; git pull)"
</pre><h2><a class="anchor" id="page_WorkingWithGit_SourceCodeAndModules_EditingSubmodule"></a>
1.2. Editing submodule source code</h2>
<p>When developing, work in dev branch and set branch to dev in all submodules and main package: </p><pre class="fragment">$ git submodule foreach "(git checkout dev; git pull; git push)"
$ git checkout dev
$ git pull
$ git push
</pre><h2><a class="anchor" id="page_WorkingWithGit_SourceCodeAndModules_UpdatingMaster"></a>
1.3. Updating master branches</h2>
<p>To synchronize master to latest dev: </p><pre class="fragment">$ git submodule foreach "(git checkout master; git merge dev)"
$ git checkout master
$ git merge dev
$ git submodule foreach "(git checkout master; git push)"
$ git push
</pre><h2><a class="anchor" id="page_WorkingWithGit_SourceCodeAndModules_ReleasingVersion"></a>
1.4. Releasing a new version</h2>
<p>In dev branch:</p><ul>
<li>Update version number in the CMakeList.txt</li>
<li>Edit version number in README.md</li>
</ul>
<p>Update master branch to current dev branch.</p>
<p>Issue a git tag for the version: </p><pre class="fragment">$ git tag -a vX.YY.ZZ -m "milk version X.YY.ZZ"
$ git push origin vX.YY.ZZ
</pre><p>Issue tags for submodules (optional, but helpful to track which submodule version makes it into package version): </p><pre class="fragment">$ git submodule foreach git tag -a milk-vX.Y.ZZ -m "milk version X.YY.ZZ"
$ git submodule foreach git push origin milk-vX.Y.ZZ
</pre><dl class="section note"><dt>Note</dt><dd>Modules inherit version numbers from the package(s) to which they belong. Consequently, modules that are shared between packages can have parallel version number histories. For example, the version history for a module may be: milk-v0.1.01 -&gt; cacao-v0.1.01 -&gt; cacao-v0.1.02 -&gt; cacao-v0.2.00 -&gt; milk-v0.1.02. Any new version, regardless of which package it is associated with, still includes all previous changes: there is a single version thread.</dd></dl>
<hr/>
<h1><a class="anchor" id="page_WorkingWithGit_SourceCodeDocumentation"></a>
2. Source Code Documentation (doxygen)</h1>
<p>Documentation tree can be locally built on dev branch with doxygen from main directory : </p><pre class="fragment">$ git checkout dev
$ doxygen
</pre><p>To push it on the origin : </p><pre class="fragment">$ cd dochtml/html
$ git add *
$ git commit -am 'updated doxygen documentation'
$ git push
</pre><dl class="section note"><dt>Note</dt><dd>When switching branches, you may get an error message "The following untracked working tree files would be overwritten by checkout" preventing branch switch. If the error only lists files in the html directory, you can safely use the -f option to force branch change. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Apr 20 2020 22:37:12 for milk by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
